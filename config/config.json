{
    "type": "array",
    "properties": [{
        "key": "cluster",
        "description": "RabbitMQ cluster properties",
        "type": "array",
        "properties": [{
            "key": "name",
            "label": "Name",
            "description": "The name of the RabbitMQ service",
            "type": "string",
            "default": "RabbitMQ",
            "required": "no"
        }, {
            "key": "description",
            "label": "Description",
            "description": "The description of the RabbitMQ service",
            "type": "string",
            "default": "",
            "required": "no"
        }, {
            "key": "vxnet",
            "label": "VxNet",
            "description": "Choose a vxnet to join",
            "type": "string",
            "default": "",
            "required": "yes"
        }, {
            "key": "resource_group",
            "label": "Resource Configuration",
            "description": "Test: 2 disc nodes with 1 HAProxy node; Prod: 2 disc nodes with 2 HAProxy nodes",
            "type": "string",
            "default": "Prod",
            "range": ["Test", "Prod"]
        }, {
            "key": "disc",
            "label": "Disc Node",
            "description": "Disc Node",
            "type": "array",
            "properties": [{
                "key": "cpu",
                "label": "CPU",
                "description": "CPUs of each node",
                "type": "integer",
                "default": 1,
                "range": [1, 2, 4, 8, 16, 32],
                "resource_group": [1, 2],
                "required": "yes"
            }, {
                "key": "memory",
                "label": "Memory",
                "description": "Memory of each node",
                "type": "integer",
                "default": 1024,
                "range": [1024, 2048, 4096, 8192, 16384, 32768, 49152, 65536, 131072],
                "resource_group": [1024, 4096],
                "required": "yes"
            }, {
                "key": "instance_class",
                "label": "Instance Class",
                "description": "The instance type for the cluster to run, such as high performance, high performance plus",
                "type": "integer",
                "default": 101,
                "range": [101, 202],
                "resource_group": [101, 202],
                "required": "yes"
            }, {
                "key": "volume_size",
                "label": "Volume Size",
                "description": "The volume size for each instance",
                "type": "integer",
                "auto_scale_step": 10,
                "min": 10,
                "max": 1000,
                "default": 10,
                "required": "yes"
            }, {
                "key": "count",
                "label": "Count",
                "description": "Disc Node Count",
                "type": "integer",
                "auto_scale_step": 1,
                "default": 2,
                "min":1,
                "max":100,
                "required": "yes"
            }]
        }, {
            "key": "ram",
            "label": "Ram Node",
            "description": "Ram Node",
            "type": "array",
            "properties": [{
                "key": "cpu",
                "label": "CPU",
                "description": "CPUs of each node",
                "type": "integer",
                "default": 1,
                "range": [1, 2, 4, 8, 16, 32],
                "required": "yes"
            }, {
                "key": "memory",
                "label": "Memory",
                "description": "Memory of each node",
                "type": "integer",
                "default": 2048,
                "range": [1024, 2048, 4096, 8192, 16384, 32768, 49152, 65536, 131072],
                "required": "yes"
            }, {
                "key": "instance_class",
                "label": "Instance Class",
                "description": "The instance type for the cluster to run, such as high performance, high performance plus",
                "type": "integer",
                "default": 101,
                "range": [101, 202],
                "resource_group": [101, 202],
                "required": "yes"
            }, {
                "key": "volume_size",
                "label": "Volume Size",
                "description": "The volume size for each instance",
                "type": "integer",
                "auto_scale_step": 10,
                "min": 10,
                "max": 1000,
                "default": 10,
                "required": "yes"
            }, {
                "key": "count",
                "label": "Count",
                "description": "Ram Node Count",
                "type": "integer",
                "auto_scale_step": 1,
                "default": 0,
                "min":0,
                "max":100,
                "required": "yes"
            }]
        }, {
            "key": "client",
            "label": "client Node",
            "description": "client Node",
            "type": "array",
            "properties": [{
                "key": "cpu",
                "label": "CPU",
                "description": "CPUs of each node",
                "type": "integer",
                "default": 1,
                "range": [1, 2, 4, 8, 16, 32],
                "required": "yes"
            }, {
                "key": "memory",
                "label": "Memory",
                "description": "Memory of each node",
                "type": "integer",
                "default": 1024,
                "range": [1024, 2048, 4096, 8192, 16384, 32768, 49152, 65536, 131072],
                "required": "yes"
            }, {
                "key": "instance_class",
                "label": "Instance Class",
                "description": "The instance type for the cluster to run, such as high performance, high performance plus",
                "type": "integer",
                "default": 101,
                "range": [101, 202],
                "required": "yes"
            }, {
                "key": "count",
                "label": "Count",
                "description": "Client Node Count",
                "type": "integer",
                "default": 1,
                "min":0,
                "max":1,
                "required": "yes"
            }]
        }, {
            "key": "haproxy",
            "label": "Haproxy+Keepalived",
            "description": "Haproxy+Keepalived",
            "type": "array",
            "properties": [{
                "key": "cpu",
                "label": "CPU",
                "description": "CPUs of each node",
                "type": "integer",
                "default": 1,
                "range": [1, 2, 4, 8, 16, 32],
                "resource_group": [1, 2],
                "required": "yes"
            }, {
                "key": "memory",
                "label": "Memory",
                "description": "Memory of each node",
                "type": "integer",
                "default": 1024,
                "range": [1024, 2048, 4096, 8192, 16384, 32768, 49152, 65536, 131072],
                "resource_group": [1024, 2048],
                "required": "yes"
            }, {
                "key": "instance_class",
                "label": "Instance Class",
                "description": "The instance type for the cluster to run, such as high performance, high performance plus",
                "type": "integer",
                "default": 101,
                "range": [101, 202],
                "required": "yes"
            }, {
                "key": "count",
                "label": "Count",
                "description": "Haproxy HA Node Count",
                "type": "integer",
                "min": 0,
                "max": 2,
                "default": 1,
                "resource_group": [1, 2],
                "required": "yes"
            }]
        }
    ]
    }, {
        "key": "env",
        "description": "RabbitMQ service properties",
        "type": "array",
        "properties": [{
            "key": "haproxy.balance.policy",
            "label": "haproxy.balance.policy",
            "description": "haproxy balance policy",
            "type": "string",
            "default": "roundrobin",
            "required": "no",
            "range": ["roundrobin", "leastconn", "static-rr", "source", "uri", "url_param"]
        }, {
            "key": "haproxy.web.port",
            "label": "haproxy.web.port",
            "description": "haproxy web port",
            "type": "integer",
            "default": 8100,
            "required": "no"
        }, {
            "key": "haproxy.username",
            "label": "haproxy.username",
            "description": "haproxy web login usernam",
            "type": "string",
            "default": "haproxy",
            "required": "no"
        }, {
            "key": "haproxy.password",
            "label": "haproxy.password",
            "description": "haproxy web login passwd",
            "type": "password",
            "changeable":true,
            "default": "haproxy",
            "pattern": "^([a-zA-Z0-9_!#%^&*()./;]{6,}|)$",
            "required": "no"
        }, {
            "key": "num.tcp.acceptors",
            "label": "num.tcp.acceptors",
            "description": "Number of Erlang processes that will accept connections for the TCP listeners",
            "type": "integer",
            "default": 10,
            "min":10,
            "max":200,
            "required": "no"
        }, {
            "key": "handshake.timeout",
            "label": "handshake.timeout",
            "description": "Maximum time for AMQP 0-8/0-9/0-9-1 handshake (after socket connection and SSL handshake), in milliseconds",
            "type": "integer",
            "default": 10000,
            "min":5000,
            "required": "no"
        }, {
            "key": "vm.memory.high.watermark",
            "label": "vm.memory.high.watermark",
            "description": "Memory threshold at which the flow control is triggered",
            "type": "number",
            "default": 0.4,
            "range": [0.3,0.4,0.5,0.6,0.7],
            "required": "no"
        }, {
            "key": "vm.memory.high.watermark.paging.ratio",
            "label": "vm.memory.high.watermark.paging.ratio",
            "description": "Fraction of the high watermark limit at which queues start to page messages out to disc to free up memory",
            "type": "number",
            "default": 0.5,
            "range": [0.3,0.4,0.5,0.6,0.7],
            "required": "no"
        }, {
            "key": "disk.free.limit",
            "label": "disk.free.limit",
            "description": "Disk free space (in bytes) limit of the partition on which RabbitMQ is storing data",
            "type": "integer",
            "default": 50000000,
            "required": "no"
        }, {
            "key": "frame.max",
            "label": "frame.max",
            "description": "Maximum permissible size of a frame (in bytes) to negotiate with clients,setting to 0 means unlimited but will trigger a bug in some QPid clients. Setting a larger value may improve throughput; setting a smaller value may improve latency",
            "type": "integer",
            "default": 131072,
            "required": "no"
        }, {
            "key": "channel.max",
            "label": "channel.max",
            "description": "Maximum permissible number of channels to negotiate with clients. Setting to 0 means unlimited. Using more channels increases memory footprint of the broker.",
            "type": "integer",
            "default": 0,
            "required": "no"
        }, {
            "key": "heartbeat",
            "label": "heartbeat",
            "description": "Value representing the heartbeat delay, in seconds, that the server sends in the connection.tune frame",
            "type": "integer",
            "default": 60,
            "required": "no"
        }, {
            "key": "collect.statistics",
            "label": "collect.statistics",
            "description": "Statistics collection mode. Primarily relevant for the management plugin",
            "type": "string",
            "range": ["none","coarse","fine"],
            "default": "none",
            "required": "no"
        }, {
            "key": "collect.statistics.interval",
            "label": "collect.statistics.interval",
            "description": "Statistics collection interval in milliseconds. Primarily relevant for the management plugin",
            "type": "integer",
            "default": 5000,
            "required": "no"
        }, {
            "key": "cluster.partition.handling",
            "label": "cluster.partition.handling",
            "description": "How to handle network partitions",
            "type": "string",
            "range": ["ignore","pause_minority","autoheal"],
            "default": "ignore",
            "required": "no"
        }, {
            "key": "hipe.compile",
            "label": "hipe.compile",
            "description": "Set to true to precompile parts of RabbitMQ with HiPE, a just-in-time compiler for Erlang. This will increase server throughput at the cost of increased startup time",
            "type": "boolean",
            "default": false,
            "range": [true, false],
            "required": "no"
        }, {
            "key": "cluster.keepalive.interval",
            "label": "cluster.keepalive.interval",
            "description": "How frequently nodes should send keepalive messages to other nodes (in milliseconds)",
            "type": "integer",
            "default": 10000,
            "required": "no"
        }, {
            "key": "background.gc.target.interval",
            "label": "background.gc.target.interval",
            "description": "The actual interval will vary depending on how long it takes to execute the operation",
            "type": "integer",
            "min":30000,
            "default": 60000,
            "required": "no"
        }, {
            "key": "background.gc.enabled",
            "label": "background.gc.enabled",
            "description": "Disabling background GC may reduce latency for client operations, keeping it enabled may reduce median RAM usage",
            "type": "boolean",
            "default": false,
            "range": [true, false],
            "required": "no"
        }, {
            "key": "reverse.dns.lookups",
            "label": "reverse.dns.lookups",
            "description": "Set to true to have RabbitMQ perform a reverse DNS lookup on client connections, and present that information through rabbitmqctl and the management plugin",
            "type": "boolean",
            "default": false,
            "range": [true, false],
            "required": "no"
        }, {
            "key": "tracing.user",
            "label": "tracing.user",
            "description": "The name of a user as which to create the tracing queues and bindings",
            "type": "string",
            "default": "guest",
            "required": "no"
        }, {
            "key": "proxy.protocol",
            "label": "proxy.protocol",
            "description": "Whether or not to enable proxy protocol support. Once enabled, clients cannot directly connect to the broker anymore. They must connect through a load balancer that sends theproxy protocol header to the broker at connection time.This setting applies only to AMQP clients, other protocolslike MQTT or STOMP have their own setting to enable proxy protocol. See the plugins documentation for more information",
            "type": "boolean",
            "default": false,
            "range": [true, false],
            "required": "no"
        }, {
            "key": "log.webViewer.enabled",
            "label": "Switch of log webViewer",
            "description": "Whether to enable log webViewer",
            "type": "boolean",
            "default": false,
            "required": "no"
        }, {
            "key": "log.webViewer.username",
            "label": "Username of log webViewer",
            "description": "username of log webViewer",
            "type": "string",
            "pattern": "^([a-z0-9.-]+)?$",
            "default": "admin",
            "required": "no"
        }, {
            "key": "log.webViewer.password",
            "label": "Password of log webViewer",
            "description": "password of log webViewer",
            "type": "password",
            "pattern": "^\\w{0,24}$",
            "default": "",
            "required": "no"
        }]
    }]
}
